import"./modulepreload-polyfill-B5Qt9EMX.js";class h{outputEl;inputEl;commands;username=null;promptEl;constructor(d,e){const a=new Date().toLocaleString();this.commands=e,this.outputEl=document.createElement("div"),this.outputEl.id="terminal-output";const t=document.createElement("p");t.id="login-div",t.textContent=`Last login: ${a}`,this.outputEl.appendChild(t),d.appendChild(this.outputEl);const n=document.createElement("div");n.id="terminal-input-line";const s=document.createElement("span");this.promptEl=s;const r=sessionStorage.getItem("l0k1-username");r?(this.username=r,this.promptEl.textContent=`${this.username}@L0k1:~$ `,this.addLine(`Welcome back, ${this.username}`),this.addLine('Type "help" for available commands.')):(this.promptEl.textContent="> ",this.addLine("Enter your username:")),this.inputEl=document.createElement("input"),this.inputEl.type="text",this.inputEl.id="terminal-input",this.inputEl.autofocus=!0,n.appendChild(s),n.appendChild(this.inputEl),d.appendChild(n),this.inputEl.addEventListener("keydown",o=>{o.key==="Enter"&&(this.handleCommand(this.inputEl.value),this.inputEl.value="")})}addLine(d){const e=document.createElement("p");e.textContent=d,this.outputEl.appendChild(e),this.outputEl.scrollTop=this.outputEl.scrollHeight}getUsername(){return this.username}handleCommand(d){const e=d.trim().toLowerCase();if(!this.username){this.username=e,this.addLine(`> ${this.username}`),this.addLine(`Welcome, ${this.username}`),this.addLine('Type "help" for available commands.'),this.promptEl.textContent=`${this.username}@L0k1:~$ `,sessionStorage.setItem("l0k1-username",this.username);return}if(!e)return;this.addLine(`${this.username}@L0k1:~$ ${e}`);const a=this.commands[e];if(a){const t=a(e);t&&this.addLine(t);return}if(e.startsWith("cat ")){const t=e.slice(4),n=this.commands["cat "+t];if(n){const s=n(t);s&&this.addLine(s)}else this.addLine(`cat: ${t}: No such file or directory`);return}if(e==="whoami"){this.addLine(this.username);return}if(e==="clear"){this.outputEl.innerHTML="";return}if(e==="date"){this.addLine(new Date().toLocaleString());return}if(e==="hostname"){this.addLine(this.username+"-node.local");return}if(e==="pwd"){this.addLine("/home/"+this.username);return}if(e==="uname"){this.addLine("L0K1 OS 1.0.0 x86_64");return}if(e==="uname -a"){this.addLine("L0K1 OS 1.0.0 "+this.username+"-node x86_64 GNU/Linux");return}if(e==="id"){this.addLine(`uid=1000(${this.username}) gid=1000(${this.username}) groups=1000(${this.username}),27(sudo)`);return}if(e==="uptime"){const t=Math.floor(Math.random()*365),n=Math.floor(Math.random()*24),s=String(Math.floor(Math.random()*60)).padStart(2,"0");this.addLine(`up ${t} days, ${n}:${s}`);return}if(e==="ifconfig"){this.addLine("eth0: 192.168.1.105  netmask 255.255.255.0");return}if(e==="netstat"){this.addLine("Active connections:"),this.addLine("tcp  0  0  192.168.1.105:22    ESTABLISHED"),this.addLine("tcp  0  0  192.168.1.105:443   LISTEN"),this.addLine("tcp  0  0  192.168.1.105:80    LISTEN");return}if(e==="sudo"||e.startsWith("sudo ")){this.addLine("Nice try.");return}if(e==="su root"){this.addLine("Nice try.");return}if(e==="exit"){this.addLine("There is no escape.");return}if(e.startsWith("echo ")){this.addLine(e.slice(5));return}if(e==="rm -rf /"){this.addLine("Nice try. System protected.");return}if(e===":q"||e===":q!"||e===":wq"){this.addLine("This is not vim.");return}if(e==="history"){this.addLine("Command history disabled for security.");return}if(e==="top"||e==="htop"){this.addLine("PID   CPU%  MEM%  COMMAND"),this.addLine("1     0.1   0.4   systemd"),this.addLine("42    0.0   0.1   cron"),this.addLine("289   0.0   0.1   sshd"),this.addLine("142   2.3   1.2   l0k1-terminal"),this.addLine("187   0.0   0.2   tor-relay"),this.addLine("203   0.1   0.3   vpn-tunnel"),this.addLine("256   8.7   4.1   bruteforce.sh"),this.addLine("301   45.2  12.8  crypto-miner  <== suspicious"),this.addLine("404   0.0   0.0   [hidden]"),this.addLine("289   0.0   0.5   keylogger"),this.addLine("333   0.0   0.1   rootkit-loader"),this.addLine("666   6.6   6.6   ???");return}if(e==="ps"||e==="ps aux"){this.addLine("PID  TTY   TIME     CMD"),this.addLine("1    pts/0 00:00:01 systemd"),this.addLine("42   pts/0 00:00:00 cron"),this.addLine("89   pts/0 00:00:03 sshd"),this.addLine("142  pts/0 00:00:12 l0k1-terminal"),this.addLine("187  pts/0 00:00:45 tor-relay"),this.addLine("203  pts/0 00:00:22 vpn-tunnel"),this.addLine("256  pts/0 00:03:17 bruteforce.sh"),this.addLine("289  pts/0 00:00:08 keylogger"),this.addLine("301  pts/0 00:15:42 crypto-miner"),this.addLine("333  pts/0 00:00:01 rootkit-loader");return}if(e==="free"||e==="free -h"){this.addLine("               total   used    free    shared  cache"),this.addLine("Mem:           16Gi    8.2Gi   3.1Gi   0.5Gi   4.7Gi"),this.addLine("Swap:          2Gi     1.8Gi   0.2Gi"),this.addLine(""),this.addLine("WARNING: High swap usage detected. Possible memory leak.");return}if(e==="df"||e==="df -h"){this.addLine("Filesystem  Size  Used  Avail  Use%  Mounted on"),this.addLine("/dev/sda1   500G  234G  266G   47%   /"),this.addLine("/dev/sda2   100G  98G   2G     98%   /var/log"),this.addLine("/dev/sdb1   1T    890G  110G   89%   /data"),this.addLine("tmpfs       8G    4.2G  3.8G   53%   /tmp"),this.addLine(""),this.addLine("WARNING: /var/log almost full. Someone is watching.");return}if(e==="neofetch"){["  ██╗      ██████╗ ██╗  ██╗ ██╗","  ██║     ██╔═══██╗██║ ██╔╝███║","  ██║     ██║   ██║█████╔╝ ╚██║","  ██║     ██║   ██║██╔═██╗  ██║","  ███████╗╚██████╔╝██║  ██╗ ██║","  ╚══════╝ ╚═════╝ ╚═╝  ╚═╝ ╚═╝"].forEach(n=>{const s=document.createElement("p");s.textContent=n,s.classList.add("neofetch-logo"),this.outputEl.appendChild(s)}),this.addLine(""),this.addLine("OS: L0K1 OS 1.0.0 x86_64"),this.addLine("Host: "+this.username+"-node"),this.addLine("Kernel: 6.1.0-l0k1"),this.addLine("Shell: l0k1-sh 1.0"),this.addLine("Terminal: L0K1 Terminal");return}for(const t of Object.keys(this.commands))if(e.startsWith(t+" ")||e===t){const n=e.slice(t.length+1),s=this.commands[t](n);s&&this.addLine(s);return}this.addLine("Command not found: "+e+'. Type "help" for commands.')}}const i=new h(document.getElementById("menu"),{help:()=>(i.addLine("=== GAME ==="),i.addLine("  ./survival      - start survival mode"),i.addLine("  ./endless       - start endless mode"),i.addLine("  cat readme      - how to play"),i.addLine(""),i.addLine("=== FILES ==="),i.addLine("  ls              - list files"),i.addLine("  cat <file>      - read a file"),i.addLine(""),i.addLine("=== SYSTEM ==="),i.addLine("  whoami          - show current user"),i.addLine("  hostname        - show hostname"),i.addLine("  pwd             - print working directory"),i.addLine("  date            - show date and time"),i.addLine("  uptime          - show system uptime"),i.addLine("  uname           - show system info"),i.addLine("  uname -a        - show full system info"),i.addLine("  id              - show user id"),i.addLine("  ifconfig        - show network config"),i.addLine("  netstat         - show connections"),i.addLine("  neofetch        - show system overview"),i.addLine("  top / htop      - show running processes"),i.addLine("  ps              - list processes"),i.addLine("  free            - show memory usage"),i.addLine("  df              - show disk usage"),i.addLine("  echo <text>     - print text"),i.addLine(""),i.addLine("=== OTHER ==="),i.addLine("  clear           - clear terminal"),i.addLine("  exit            - exit terminal"),"  help            - show this message"),ls:()=>(i.addLine("readme"),i.addLine("settings"),i.addLine("survival"),i.addLine("endless"),"fsoceity"),"./survival":()=>(window.location.href="/game.html?mode=survival","Loading survival mode..."),"./endless":()=>"Coming soon...","cat readme":()=>(i.addLine("You are a hacker. Clients give you quests."),i.addLine("Use real terminal commands to complete them."),i.addLine("Watch your back - if they find you, it's over."),'Type "help" to see all available commands.'),"cat settings":()=>"Settings: coming soon","cat fsoceity":()=>"We are watching you.","cat survival":()=>"Executable file. Use ./survival to run.","cat endless":()=>"Executable file. Use ./endless to run.",ssh:()=>"Usage: ssh <user>@<host> (available in game)",scp:()=>"Usage: scp <file> <user>@<host>:<path> (available in game)",wget:()=>"Usage: wget <url> (available in game)",curl:()=>"Usage: curl <url> (available in game)",nc:()=>"Usage: nc <host> <port> (available in game)",ncat:()=>"Usage: ncat <host> <port> (available in game)",nmap:()=>"Usage: nmap <ip> (available in game)",ping:()=>"Usage: ping <host> (available in game)",grep:()=>"Usage: grep <pattern> <file> (available in game)",chmod:()=>"Permission denied: restricted shell",mkdir:()=>"Permission denied: restricted shell",rm:()=>"Permission denied: restricted shell",touch:()=>"Permission denied: restricted shell",mv:()=>"Permission denied: restricted shell",cp:()=>"Permission denied: restricted shell",cd:()=>"Permission denied: restricted shell",nano:()=>"Permission denied: restricted shell",vim:()=>"Permission denied: restricted shell",kill:()=>"Permission denied: restricted shell",shutdown:()=>"Permission denied: restricted shell",reboot:()=>"Permission denied: restricted shell",systemctl:()=>"Permission denied: restricted shell",service:()=>"Permission denied: restricted shell",dd:()=>"Permission denied: restricted shell",mkfs:()=>"Permission denied: restricted shell",fdisk:()=>"Permission denied: restricted shell",mount:()=>"Permission denied: restricted shell"});
